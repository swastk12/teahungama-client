{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/user/Desktop/teahungama/clients/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/teahungama/clients/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\Desktop\\\\teahungama\\\\clients\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{axiosInstance}from\"../../config\";import{useContext,useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import\"./singpost.css\";import{Link}from\"react-router-dom\";import{Context}from\"../../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SingPost(){var location=useLocation();var path=location.pathname.split(\"/\")[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setpost=_useState2[1];var PF=\"http://3.110.162.5/images/\";var _useContext=useContext(Context),user=_useContext.user;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),desc=_useState6[0],setDesc=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updateMod=_useState8[0],setUpdateMod=_useState8[1];useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosInstance.get(\"/posts/\"+path);case 2:res=_context.sent;setpost(res.data);setTitle(res.data.title);setDesc(res.data.desc);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[path]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosInstance.delete(\"/posts/\".concat(post._id),{data:{username:user.username}});case 3:window.location.replace(\"/\");_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axiosInstance.put(\"/posts/\".concat(post._id),{username:user.username,title:title,desc:desc});case 3:setUpdateMod(false);_context3.next=8;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleUpdate(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"singlePost\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostWrapper\",children:[post.photo&&/*#__PURE__*/_jsx(\"img\",{className:\"singlePostImg\",src:PF+post.photo,alt:\"\"}),updateMod?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},className:\"singlePostTitleInput\",autoFocus:true}):/*#__PURE__*/_jsxs(\"h1\",{className:\"singlePostTitle\",children:[title,post.username===(user===null||user===void 0?void 0:user.username)&&/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostEdit\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-edit\",onClick:function onClick(){return setUpdateMod(true);}}),/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-trash-alt\",onClick:handleDelete})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"singlePostInfo\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Author:\",/*#__PURE__*/_jsx(\"b\",{className:\"singlePostAuthor\",children:/*#__PURE__*/_jsx(Link,{to:\"/?user=\".concat(post.usrname),className:\"links\",children:/*#__PURE__*/_jsxs(\"b\",{children:[post.username,\" \"]})})})]}),/*#__PURE__*/_jsx(\"span\",{children:new Date(post.createdAt).toDateString()})]}),updateMod?/*#__PURE__*/_jsx(\"textarea\",{className:\"singlePostDescInput\",value:desc,onChange:function onChange(e){return setDesc(e.target.value);},autoFocus:true}):/*#__PURE__*/_jsx(\"p\",{className:\"singlePostDesc\",children:desc}),updateMod&&/*#__PURE__*/_jsx(\"button\",{className:\"singlePostButton\",onClick:handleUpdate,children:\" Update \"})]})});}","map":{"version":3,"sources":["C:/Users/user/Desktop/teahungama/clients/client/src/components/singlepost/SingPost.jsx"],"names":["axiosInstance","useContext","useEffect","useState","useLocation","Link","Context","SingPost","location","path","pathname","split","post","setpost","PF","user","title","setTitle","desc","setDesc","updateMod","setUpdateMod","getPost","get","res","data","handleDelete","delete","_id","username","window","replace","handleUpdate","put","photo","e","target","value","usrname","Date","createdAt","toDateString"],"mappings":"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","sourcesContent":["import {axiosInstance} from \"../../config\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\"\r\nimport \"./singpost.css\"\r\nimport {Link} from \"react-router-dom\" \r\nimport { Context } from \"../../context/Context\";\r\n\r\n\r\nexport default function SingPost() {\r\n  const location = useLocation()\r\n  const path = location.pathname.split(\"/\")[2];\r\n  const [post, setpost] =useState({})\r\n  const PF = \"http://3.110.162.5/images/\";\r\n  const { user } = useContext(Context);\r\n  const [title, setTitle] = useState(\"\")\r\n  const [desc, setDesc] = useState(\"\")\r\n  const [updateMod, setUpdateMod] = useState(false)\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n const getPost = async ()=>{\r\n   const res = await axiosInstance.get(\"/posts/\" + path);\r\n   setpost(res.data);\r\n   setTitle(res.data.title)\r\n   setDesc(res.data.desc)\r\n }\r\n getPost()\r\n  },[path])\r\n\r\n  const handleDelete = async ()=>{\r\n  try{\r\n    await  axiosInstance.delete(`/posts/${post._id}`,{data:{username: user.username}});\r\n    window.location.replace(\"/\")\r\n  }catch(err){\r\n}\r\n};\r\n\r\nconst handleUpdate = async ()=>{\r\n  try{\r\n    await  axiosInstance.put(`/posts/${post._id}`,{username: user.username, title, desc});\r\n\r\n    setUpdateMod(false)\r\n  }catch(err){\r\n\r\n  }\r\n}\r\n\r\n  return (\r\n    <div className=\"singlePost\">\r\n          <div className=\"singlePostWrapper\">\r\n            \r\n            {post.photo && (\r\n      <img className=\"singlePostImg\"\r\n      src ={ PF + post.photo}\r\n      alt =\"\"/>\r\n      )}{\r\n        updateMod ? <input type=\"text\" value={title} \r\n        onChange={(e) => setTitle(e.target.value)} className=\"singlePostTitleInput\" autoFocus /> :(\r\n          <h1 className=\"singlePostTitle\">\r\n          {title}\r\n          {post.username === user?.username &&(\r\n         <div className=\"singlePostEdit\">\r\n         <i className=\"singlePostIcon far fa-edit\" onClick={()=>setUpdateMod(true)}></i>\r\n         <i className=\"singlePostIcon far fa-trash-alt\" onClick={handleDelete}></i>\r\n       </div>\r\n        )}\r\n      </h1>\r\n\r\n      )\r\n      }\r\n\r\n\r\n        <div className=\"singlePostInfo\">\r\n          <span>\r\n            Author:\r\n            <b className=\"singlePostAuthor\">\r\n            <Link to = {`/?user=${post.usrname}`} className=\"links\">  \r\n            <b>{post.username} </b>\r\n            </Link>\r\n            </b>\r\n          </span>\r\n          <span>{new Date(post.createdAt).toDateString()}</span>\r\n        </div>\r\n        {updateMod ? ( <textarea className=\"singlePostDescInput\" value={desc}\r\n         onChange={(e) => setDesc(e.target.value)}\r\n        autoFocus/>):(\r\n          <p className=\"singlePostDesc\">\r\n          {desc}\r\n          </p>\r\n        )}\r\n        {updateMod && \r\n         <button className=\"singlePostButton\" onClick={handleUpdate}> Update </button>\r\n        }\r\n     \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}